<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Obfuscador</title>
<style>
body{font-family:sans-serif;margin:40px;background:#111;color:#eee}
input,button{margin:10px 0;padding:10px;font-size:16px}
.c{max-width:600px;margin:auto;background:#222;padding:20px;border-radius:8px}
</style>
</head>
<body>
<div class="c">
<h1>Obfuscador Lua</h1>
<input type="file" id="f" accept=".txt,.lua"><br>
<label>Profundidade:</label>
<input type="number" id="d" value="5" min="1" max="20"><br>
<button onclick="O()">Obfuscar</button>
<p id="s"></p>
</div>
<script>
const C='QWERTYUIOPASDFGHJKLZXCVBNMplmoknijbuhvygctfxrdzesawq1234567890+/';
function B(t){let b='';for(let i=0;i<t.length;i++){let c=t.charCodeAt(i);for(let j=8;j>=1;j--){b+=(c%2**j-c%2**(j-1))>0?'1':'0'}}b+='0000';return b.match(/\d{1,6}/g).map(bits=>{if(bits.length<6)return'';let n=0;for(let i=0;i<6;i++){n+=bits[i]==='1'?2**(5-i):0}return C[n]}).join('')+['','==','='][t.length%3]}
function H(x){let s=0;for(let i=0;i<x.length;i++){s=(s+x.charCodeAt(i)*(i+1))%1e9+7}return s}
function T(e,k){const r=()=>Math.floor(Math.random()*9e4)+1e4,p='K'+r(),d='D'+r(),c='C'+r(),x='X'+r();return `local ${p}='${C}'
local function ${d}(s)return(s:gsub('.',function(c)if c=='='then return''end local r,f='',(${p}:find(c)-1)for i=6,1,-1 do r=r..(f%2^i-f%2^(i-1)>0 and'1'or'0')end return r end):gsub('%d%d%d?%d?%d?%d?%d?%d?',function(bits)if #bits~=8 then return''end local n=0 for i=1,8 do n=n+(bits:sub(i,i)=='1'and 2^(8-i)or 0)end return string.char(n)end))end
local function ${c}(v)local s=0 for i=1,#v do s=(s+v:byte(i)*i)%1000000007 end return s end
local ${x}=${d}('${e}')
if ${c}(${x})~=${k} then return end
loadstring(${x})()`}
function R(p,n){let c=p;for(let i=0;i<n;i++){const k=H(c);c=T(B(c),k)}return c}
function O(){const F=document.getElementById('f'),D=document.getElementById('d'),S=document.getElementById('s');if(!F.files.length){alert('Selecione um arquivo!');return}const f=F.files[0],r=new FileReader();r.onload=function(e){const P=e.target.result,N=parseInt(D.value)||5;S.textContent='Obfuscando...';const F=R(P,N),L=new Blob([F],{type:'text/plain'}),a=document.createElement('a');a.href=URL.createObjectURL(L);a.download=f.name.replace(/\.(txt|lua)$/,'')+'_obf.lua';document.body.appendChild(a);a.click();document.body.removeChild(a);S.textContent='âœ… Feito!'};r.readAsText(f)}
</script>
</body>
</html>
